// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Post {
  id        Int      @id @default(autoincrement())
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  title     String
  content   String?  @db.Text
}

model User {
  userID       Int           @id @default(autoincrement())
  userName     String        @db.Text
  userEmail    String        @unique @db.Text
  userPassword String        @db.Text
  OrderHistory OrderHistory?
  UserOrder    UserOrder?
}

model OrderHistory {
  user      User        @relation(fields: [uID], references: [userID])
  uID       Int         @unique
  orderID   Int         @id @default(autoincrement())
  userEmail String      @unique @db.Text
  content   String?     @db.Text
  UserOrder UserOrder[]
}

model Menu {
  menuID          Int        @id @default(autoincrement())
  menuName        String     @db.Text
  menuPrice       Int        @db.Integer
  menuDescription String?    @db.Text
  UserOrder       UserOrder?
}

model Admin {
  adminID       Int    @id @default(autoincrement())
  adminPassword String @db.Text
}

model Table {
  tableID   Int @id @default(autoincrement())
  tableSize Int @db.Integer
}

model UserOrder {
  order        OrderHistory @relation(fields: [oID], references: [orderID])
  user         User         @relation(fields: [uID], references: [userID])
  menu         Menu         @relation(fields: [mID], references: [menuID])
  oID          Int          @id
  uID          Int          @unique
  mID          Int          @unique
  menuQuantity Int          @db.Integer
  orderPax     Int          @db.Integer
  totalPayment Int          @db.Integer
}
